# Security System Flow Diagram

## ğŸ”„ Session Lifecycle Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER LOGS IN                             â”‚
â”‚                              â†“                                   â”‚
â”‚                    Session Timer Starts                          â”‚
â”‚                    (sessionStartRef = now)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ACTIVE SESSION STATE                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Activity Monitoring (throttled to 1/second)             â”‚  â”‚
â”‚  â”‚  â€¢ Mouse movements    â€¢ Keyboard input                   â”‚  â”‚
â”‚  â”‚  â€¢ Clicks             â€¢ Scroll events                    â”‚  â”‚
â”‚  â”‚  â€¢ Touch interactions                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â†“                                   â”‚
â”‚        Each Activity â†’ Reset Inactivity Timer                   â”‚
â”‚                              â†“                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         Two Parallel Timers Running:                     â”‚  â”‚
â”‚  â”‚  1. Inactivity Timer (15 min default)                    â”‚  â”‚
â”‚  â”‚  2. Absolute Timer (2 hours default) â† CANNOT BE RESET   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                   â”‚
        No Activity â”‚                   â”‚ Absolute Timeout
        for 13 min  â”‚                   â”‚ Reaches 2 hours
                    â†“                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   WARNING PHASE           â”‚  â”‚  IMMEDIATE LOGOUT         â”‚
â”‚  (2 minutes before)       â”‚  â”‚  (No Warning)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Modal appears          â”‚  â”‚  â€¢ Force logout           â”‚
â”‚  â€¢ Countdown: 2:00        â”‚  â”‚  â€¢ Reason: absolute       â”‚
â”‚  â€¢ User can see timer     â”‚  â”‚  â€¢ Redirect to login      â”‚
â”‚  â€¢ Pulse animation        â”‚  â”‚  â€¢ Show message           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                â”‚
    â”‚ User Action?   â”‚
    â”‚                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                â”‚
    â†“                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Extend  â”‚    â”‚ Logout   â”‚
â”‚ Session â”‚    â”‚ Now      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                â”‚
    â”‚                â†“
    â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          â”‚  Manual Logout   â”‚
    â”‚          â”‚  â€¢ Clear timers  â”‚
    â”‚          â”‚  â€¢ Sign out      â”‚
    â”‚          â”‚  â€¢ Redirect      â”‚
    â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Session Extended         â”‚
â”‚  â€¢ Reset inactivity timer â”‚
â”‚  â€¢ Check absolute timeout â”‚
â”‚  â€¢ Hide warning modal     â”‚
â”‚  â€¢ Continue session       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â†“
            Back to ACTIVE SESSION STATE
```

## ğŸ¯ Timer Relationships

```
Absolute Timer (2h)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                        â†‘
                                        â”‚
                            Absolute timeout reached
                            â†’ IMMEDIATE LOGOUT

Inactivity Timer (15m)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â†’ Reset on activity
                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â†’ Reset on activity
                                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                        â†‘
                                        â”‚ 13min mark
                                        â””â”€â”€â”€â”€â”€â†’ WARNING PHASE (2min)
                                                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                                          â†‘
                                                          â”‚
                                                    15min â†’ LOGOUT
```

## ğŸ”” Warning Modal States

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        SESSION TIMEOUT WARNING            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                           â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚        â”‚   COUNTDOWN     â”‚               â”‚
â”‚        â”‚      1:45       â”‚ â† Real-time   â”‚
â”‚        â”‚   remaining     â”‚   countdown   â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                           â”‚
â”‚  "Due to inactivity, you will be         â”‚
â”‚   automatically logged out..."           â”‚
â”‚                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Stay Logged â”‚  â”‚  Logout Now  â”‚      â”‚
â”‚  â”‚     In      â”‚  â”‚              â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“                    â†“
    Reset Timer        Immediate Logout
```

## ğŸ¨ Component Architecture

```
AdminDashboard.jsx
    â”‚
    â”œâ”€â†’ useSessionTimeout() Hook
    â”‚       â”‚
    â”‚       â”œâ”€â†’ Track Activity Events
    â”‚       â”œâ”€â†’ Manage Timers
    â”‚       â”œâ”€â†’ Handle Warnings
    â”‚       â””â”€â†’ Execute Logout
    â”‚
    â””â”€â†’ SessionTimeoutWarning Component
            â”‚
            â”œâ”€â†’ Display Modal
            â”œâ”€â†’ Show Countdown
            â”œâ”€â†’ Handle User Actions
            â””â”€â†’ Communicate with Hook
```

## ğŸ“¦ Data Flow

```
Activity Detected
      â†“
useSessionTimeout Hook
      â†“
Throttle Check (1s)
      â†“
Reset Inactivity Timer
      â†“
Check Absolute Timeout
      â†“
    â”Œâ”€â”´â”€â”
    â”‚   â”‚
    Yes â”‚ No
    â”‚   â”‚
    â†“   â””â”€â†’ Continue Session
Logout       â†“
          Set Warning Timer
                â†“
          Warning Time Reached
                â†“
          showWarning = true
                â†“
    SessionTimeoutWarning Modal
                â†“
          User Interaction
                â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                â†“
    Extend         Logout Now
    Session             â†“
        â†“           Force Logout
    Reset Timer         â†“
        â†“           Redirect
    Continue        to Login
```

## ğŸ” Security Checkpoints

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      SECURITY CHECKPOINT FLOW          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  1. âœ“ User Authentication              â”‚
â”‚     â””â”€â†’ Firebase Auth Check            â”‚
â”‚                                        â”‚
â”‚  2. âœ“ Session Initialization           â”‚
â”‚     â””â”€â†’ Start Both Timers              â”‚
â”‚                                        â”‚
â”‚  3. âœ“ Continuous Monitoring            â”‚
â”‚     â””â”€â†’ Activity Event Listeners       â”‚
â”‚                                        â”‚
â”‚  4. âœ“ Warning Phase                    â”‚
â”‚     â””â”€â†’ User Notification              â”‚
â”‚                                        â”‚
â”‚  5. âœ“ Timeout Enforcement              â”‚
â”‚     â””â”€â†’ Automatic Logout               â”‚
â”‚                                        â”‚
â”‚  6. âœ“ Clean Session Termination        â”‚
â”‚     â””â”€â†’ Clear All Timers & State       â”‚
â”‚                                        â”‚
â”‚  7. âœ“ Logout Reason Tracking           â”‚
â”‚     â””â”€â†’ Store in SessionStorage        â”‚
â”‚                                        â”‚
â”‚  8. âœ“ Login Page Notification          â”‚
â”‚     â””â”€â†’ Display Logout Reason          â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§ª Testing Scenarios

### Scenario 1: Normal Session
```
Login â†’ Activity â†’ Activity â†’ ... â†’ Manual Logout
  â†“       â†“          â†“               â†“
Start   Reset      Reset         Clean Exit
Timer   Timer      Timer
```

### Scenario 2: Inactivity Logout
```
Login â†’ Activity â†’ No Activity (13m) â†’ Warning â†’ No Response â†’ Auto Logout
  â†“       â†“            â†“                â†“           â†“             â†“
Start   Reset    Warning Phase      2:00...     0:00        Redirect
Timer   Timer      Starts            1:59        
```

### Scenario 3: Absolute Timeout
```
Login â†’ Active for 1h 59m â†’ Warning â†’ Active â†’ 2h Mark â†’ Force Logout
  â†“         â†“                  â†“        â†“          â†“            â†“
Start    Resets           Warning   Extend    Absolute      Immediate
Timer   Constantly         Shows    Disabled   Reached       Logout
```

### Scenario 4: Warning Extension
```
Login â†’ 13min Inactive â†’ Warning â†’ Click "Stay Logged In" â†’ Continue
  â†“           â†“              â†“              â†“                    â†“
Start      Warning       Modal          Reset                Back to
Timer       Phase        Shows          Timer               Normal State
```

---

**Legend:**
- `â†’` : Process flow
- `â†“` : Next step
- `â”œâ”€â†’` : Branch/Option
- `â”Œâ”€â”´â”€â”` : Decision point
- `âœ“` : Security checkpoint
